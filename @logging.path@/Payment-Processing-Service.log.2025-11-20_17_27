[INFO ] 2025-11-20 17:27:04.143 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.controller.PaymentController - Initiate payment || initiateOrderReq : InitiateOrderReq(successUrl=https://merchant-app.com/payment/success, cancelUrl=https://merchant-app.com/payment/cancel) 
[INFO ] 2025-11-20 17:27:04.145 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.impl.PaymentServiceImpl - Transaction reference || initiatePayment : 4e556be9-fd50-4b7a-90f0-0bcb578c7449 
[INFO ] 2025-11-20 17:27:04.145 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.PaymentValidator - validateInitiateOrderReq ||  txnReference : 4e556be9-fd50-4b7a-90f0-0bcb578c7449 , initiateOrderReq : InitiateOrderReq(successUrl=https://merchant-app.com/payment/success, cancelUrl=https://merchant-app.com/payment/cancel) 
[INFO ] 2025-11-20 17:27:04.145 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.dao.impl.TransactionDaoImpl - Getting Transaction by txn reference : 4e556be9-fd50-4b7a-90f0-0bcb578c7449 
[INFO ] 2025-11-20 17:27:04.148 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.dao.impl.TransactionDaoImpl - Txn entity fetched by txnReference : TransactionEntity(id=13, userId=6776221, paymentMethodId=1, providerId=1, paymentTypeId=1, txnStatusId=3, amount=96.00, currency=USD, merchantTransactionReference=ORD_9090_1897_1121, txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, providerReference=2LT18875SH981611R, errorCode=30002, errorMessage=return url required, creationDate=2025-11-20 17:19:11.41, retryCount=null) 
[INFO ] 2025-11-20 17:27:04.148 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.impl.PaymentServiceImpl - Txn entity || initiatePayment : TransactionEntity(id=13, userId=6776221, paymentMethodId=1, providerId=1, paymentTypeId=1, txnStatusId=3, amount=96.00, currency=USD, merchantTransactionReference=ORD_9090_1897_1121, txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, providerReference=2LT18875SH981611R, errorCode=30002, errorMessage=return url required, creationDate=2025-11-20 17:19:11.41, retryCount=null)  
[INFO ] 2025-11-20 17:27:04.150 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.PaymentStatusProcessor - Transaction Dto in PaymentStatusProcessor : TransactionDto(id=13, userId=6776221, paymentMethodId=1, providerId=1, paymentTypeId=1, txnStatusId=2, amount=96.00, currency=USD, merchantTransactionReference=ORD_9090_1897_1121, txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, providerReference=2LT18875SH981611R, errorCode=30002, errorMessage=return url required, creationDate=2025-11-20 17:19:11.41, retryCount=null) 
[INFO ] 2025-11-20 17:27:04.150 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.factory.PaymentStatusFactory - Initiated status processor  
[INFO ] 2025-11-20 17:27:04.150 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.statusprocessor.InitiatedStatusProcessor - Transaction Dto || InitiatedStatusProcessor : TransactionDto(id=13, userId=6776221, paymentMethodId=1, providerId=1, paymentTypeId=1, txnStatusId=2, amount=96.00, currency=USD, merchantTransactionReference=ORD_9090_1897_1121, txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, providerReference=2LT18875SH981611R, errorCode=30002, errorMessage=return url required, creationDate=2025-11-20 17:19:11.41, retryCount=null)  
[INFO ] 2025-11-20 17:27:04.151 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.statusprocessor.InitiatedStatusProcessor - Transaction Entity || InitiatedStatusProcessor : TransactionEntity(id=13, userId=6776221, paymentMethodId=1, providerId=1, paymentTypeId=1, txnStatusId=2, amount=96.00, currency=USD, merchantTransactionReference=ORD_9090_1897_1121, txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, providerReference=2LT18875SH981611R, errorCode=30002, errorMessage=return url required, creationDate=2025-11-20 17:19:11.41, retryCount=null) 
[INFO ] 2025-11-20 17:27:04.151 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.dao.impl.TransactionDaoImpl - Txn entity || updateTransaction : TransactionEntity(id=13, userId=6776221, paymentMethodId=1, providerId=1, paymentTypeId=1, txnStatusId=2, amount=96.00, currency=USD, merchantTransactionReference=ORD_9090_1897_1121, txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, providerReference=2LT18875SH981611R, errorCode=30002, errorMessage=return url required, creationDate=2025-11-20 17:19:11.41, retryCount=null) 
[INFO ] 2025-11-20 17:27:04.157 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.statusprocessor.InitiatedStatusProcessor - Updated Transaction Entity || InitiatedStatusProcessor : TransactionEntity(id=13, userId=6776221, paymentMethodId=1, providerId=1, paymentTypeId=1, txnStatusId=2, amount=96.00, currency=USD, merchantTransactionReference=ORD_9090_1897_1121, txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, providerReference=2LT18875SH981611R, errorCode=30002, errorMessage=return url required, creationDate=2025-11-20 17:19:11.41, retryCount=null)
[INFO ] 2025-11-20 17:27:04.157 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.PaymentStatusProcessor - Transaction DTO after processing status  : TransactionDto(id=13, userId=6776221, paymentMethodId=1, providerId=1, paymentTypeId=1, txnStatusId=2, amount=96.00, currency=USD, merchantTransactionReference=ORD_9090_1897_1121, txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, providerReference=2LT18875SH981611R, errorCode=30002, errorMessage=return url required, creationDate=2025-11-20 17:19:11.41, retryCount=null) 
[INFO ] 2025-11-20 17:27:04.157 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.impl.PaymentServiceImpl - Processes DTO from CREATED to INITIATED : TransactionDto(id=13, userId=6776221, paymentMethodId=1, providerId=1, paymentTypeId=1, txnStatusId=2, amount=96.00, currency=USD, merchantTransactionReference=ORD_9090_1897_1121, txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, providerReference=2LT18875SH981611R, errorCode=30002, errorMessage=return url required, creationDate=2025-11-20 17:19:11.41, retryCount=null) 
[INFO ] 2025-11-20 17:27:04.157 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.impl.helper.PPCreateOrderHelper - Prepared http request for initiating payment : {"amount":96.0,"currencyCode":"USD","returnUrl":"https://merchant-app.com/payment/success","cancelUrl":"https://merchant-app.com/payment/cancel"} 
[INFO ] 2025-11-20 17:27:04.158 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.impl.PaymentServiceImpl - HTTP REQUEST || initiatePayment : HttpRequest(url=http://localhost:8083/orders, httpMethod=POST, headers=[Content-Type:"application/json"], body={"amount":96.0,"currencyCode":"USD","returnUrl":"https://merchant-app.com/payment/success","cancelUrl":"https://merchant-app.com/payment/cancel"}) 
[INFO ] 2025-11-20 17:27:06.046 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.http.HttpServiceEngine - Http response : <200 OK OK,{"orderId":"1UU24841XG617501Y","paymentStatus":"PAYER_ACTION_REQUIRED","redirectUrl":"https://www.sandbox.paypal.com/checkoutnow?token=1UU24841XG617501Y"},[Content-Type:"application/json", Transfer-Encoding:"chunked", Date:"Thu, 20 Nov 2025 11:57:06 GMT", Keep-Alive:"timeout=60", Connection:"keep-alive"]> 
[INFO ] 2025-11-20 17:27:06.046 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.impl.PaymentServiceImpl - HTTP RESPONSE || httpServiceEngine : <200 OK OK,{"orderId":"1UU24841XG617501Y","paymentStatus":"PAYER_ACTION_REQUIRED","redirectUrl":"https://www.sandbox.paypal.com/checkoutnow?token=1UU24841XG617501Y"},[Content-Type:"application/json", Transfer-Encoding:"chunked", Date:"Thu, 20 Nov 2025 11:57:06 GMT", Keep-Alive:"timeout=60", Connection:"keep-alive"]> 
[INFO ] 2025-11-20 17:27:06.047 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.impl.helper.PPCreateOrderHelper - HTTP RESPONSE for initiate payment : <200 OK OK,{"orderId":"1UU24841XG617501Y","paymentStatus":"PAYER_ACTION_REQUIRED","redirectUrl":"https://www.sandbox.paypal.com/checkoutnow?token=1UU24841XG617501Y"},[Content-Type:"application/json", Transfer-Encoding:"chunked", Date:"Thu, 20 Nov 2025 11:57:06 GMT", Keep-Alive:"timeout=60", Connection:"keep-alive"]>  
[INFO ] 2025-11-20 17:27:06.048 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.impl.helper.PPCreateOrderHelper - Preparing SUCCESS RESPONSE for initiate Payment : <200 OK OK,{"orderId":"1UU24841XG617501Y","paymentStatus":"PAYER_ACTION_REQUIRED","redirectUrl":"https://www.sandbox.paypal.com/checkoutnow?token=1UU24841XG617501Y"},[Content-Type:"application/json", Transfer-Encoding:"chunked", Date:"Thu, 20 Nov 2025 11:57:06 GMT", Keep-Alive:"timeout=60", Connection:"keep-alive"]> 
[INFO ] 2025-11-20 17:27:06.049 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.impl.helper.PPCreateOrderHelper - Initiate Payment Response with status PAYER_ACTION_REQUIRED : PPInitiatePayRes(orderId=1UU24841XG617501Y, paymentStatus=PAYER_ACTION_REQUIRED, redirectUrl=https://www.sandbox.paypal.com/checkoutnow?token=1UU24841XG617501Y)
[INFO ] 2025-11-20 17:27:06.049 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.impl.helper.PPCreateOrderHelper - Parsed Initiate Payment response  : PPInitiatePayRes(orderId=1UU24841XG617501Y, paymentStatus=PAYER_ACTION_REQUIRED, redirectUrl=https://www.sandbox.paypal.com/checkoutnow?token=1UU24841XG617501Y) 
[INFO ] 2025-11-20 17:27:06.049 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.impl.PaymentServiceImpl - initiateRes : PPInitiatePayRes(orderId=1UU24841XG617501Y, paymentStatus=PAYER_ACTION_REQUIRED, redirectUrl=https://www.sandbox.paypal.com/checkoutnow?token=1UU24841XG617501Y)  
[INFO ] 2025-11-20 17:27:06.049 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.PaymentStatusProcessor - Transaction Dto in PaymentStatusProcessor : TransactionDto(id=13, userId=6776221, paymentMethodId=1, providerId=1, paymentTypeId=1, txnStatusId=3, amount=96.00, currency=USD, merchantTransactionReference=ORD_9090_1897_1121, txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, providerReference=1UU24841XG617501Y, errorCode=30002, errorMessage=return url required, creationDate=2025-11-20 17:19:11.41, retryCount=null) 
[INFO ] 2025-11-20 17:27:06.049 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.factory.PaymentStatusFactory - Pending status processor  
[INFO ] 2025-11-20 17:27:06.050 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.statusprocessor.PendingStatusProcessor - Transaction Dto || PendingStatusProcessor : TransactionDto(id=13, userId=6776221, paymentMethodId=1, providerId=1, paymentTypeId=1, txnStatusId=3, amount=96.00, currency=USD, merchantTransactionReference=ORD_9090_1897_1121, txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, providerReference=1UU24841XG617501Y, errorCode=30002, errorMessage=return url required, creationDate=2025-11-20 17:19:11.41, retryCount=null)  
[INFO ] 2025-11-20 17:27:06.052 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.statusprocessor.PendingStatusProcessor - Transaction Entity || PendingStatusProcessor : TransactionEntity(id=13, userId=6776221, paymentMethodId=1, providerId=1, paymentTypeId=1, txnStatusId=3, amount=96.00, currency=USD, merchantTransactionReference=ORD_9090_1897_1121, txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, providerReference=1UU24841XG617501Y, errorCode=30002, errorMessage=return url required, creationDate=2025-11-20 17:19:11.41, retryCount=null) 
[INFO ] 2025-11-20 17:27:06.053 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.dao.impl.TransactionDaoImpl - Txn entity || updateTransaction : TransactionEntity(id=13, userId=6776221, paymentMethodId=1, providerId=1, paymentTypeId=1, txnStatusId=3, amount=96.00, currency=USD, merchantTransactionReference=ORD_9090_1897_1121, txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, providerReference=1UU24841XG617501Y, errorCode=30002, errorMessage=return url required, creationDate=2025-11-20 17:19:11.41, retryCount=null) 
[INFO ] 2025-11-20 17:27:06.066 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.statusprocessor.PendingStatusProcessor - Updated Transaction Entity || PendingStatusProcessor : TransactionEntity(id=13, userId=6776221, paymentMethodId=1, providerId=1, paymentTypeId=1, txnStatusId=3, amount=96.00, currency=USD, merchantTransactionReference=ORD_9090_1897_1121, txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, providerReference=1UU24841XG617501Y, errorCode=30002, errorMessage=return url required, creationDate=2025-11-20 17:19:11.41, retryCount=null)
[INFO ] 2025-11-20 17:27:06.066 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.PaymentStatusProcessor - Transaction DTO after processing status  : TransactionDto(id=13, userId=6776221, paymentMethodId=1, providerId=1, paymentTypeId=1, txnStatusId=3, amount=96.00, currency=USD, merchantTransactionReference=ORD_9090_1897_1121, txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, providerReference=1UU24841XG617501Y, errorCode=30002, errorMessage=return url required, creationDate=2025-11-20 17:19:11.41, retryCount=null) 
[INFO ] 2025-11-20 17:27:06.067 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.service.impl.PaymentServiceImpl - Processes DTO from INITIATED to PENDING ...
[INFO ] 2025-11-20 17:27:06.067 [http-nio-8082-exec-3] [Payment-Processing-Service] com.example.demo.controller.PaymentController - INITIATE PAYMENT response : PaymentResponse(txnReference=4e556be9-fd50-4b7a-90f0-0bcb578c7449, txnStatusId=3, redirectUrl=https://www.sandbox.paypal.com/checkoutnow?token=1UU24841XG617501Y, providerReference=1UU24841XG617501Y)  
